{% extends "layout.html" %}

{% block title %}Result Card - {{ student.name }}{% endblock %}

{% block main %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card border-primary">
            <div class="card-header bg-primary text-white text-center">
                <h3 class="mb-0">STUDENT RESULT CARD</h3>
                <p class="mb-0">Academic Performance Report</p>
            </div>
            <div class="card-body">
                <!-- Student Information -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h5>Student Information</h5>
                        <table class="table table-borderless">
                            <tr><td><strong>Name:</strong></td><td>{{ student.name }}</td></tr>
                            <tr><td><strong>Email:</strong></td><td>{{ student.email }}</td></tr>
                            <tr><td><strong>Course:</strong></td><td>{{ student.course }}</td></tr>
                            <tr><td><strong>Phone:</strong></td><td>{{ student.phone }}</td></tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h5>Overall Performance</h5>
                        <div class="text-center">
                            <h2 class="text-{{ 'success' if overall_performance.status == 'Pass' else 'danger' }}">
                                {{ overall_performance.final_grade }}
                            </h2>
                            <p class="h4">{{ overall_performance.average_marks }}%</p>
                            <span class="badge bg-{{ 'success' if overall_performance.status == 'Pass' else 'danger' }} fs-6">
                                {{ overall_performance.status }}
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Course-wise Results -->
                <h5>Course-wise Performance</h5>
                <div class="table-responsive mb-4">
                    <table class="table table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th>Course</th>
                                <th>Assessments</th>
                                <th>Average Marks</th>
                                <th>Grade</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for course, result in course_results.items() %}
                            <tr>
                                <td><strong>{{ course }}</strong></td>
                                <td>{{ result.total_assessments }}</td>
                                <td>{{ result.average_marks }}%</td>
                                <td>
                                    <span class="badge bg-{{ 'success' if result.final_grade in ['A','B'] else 'warning' if result.final_grade in ['C','D'] else 'danger' }}">
                                        {{ result.final_grade }}
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-{{ 'success' if result.status == 'Pass' else 'danger' }}">
                                        {{ result.status }}
                                    </span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- Summary Statistics -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="card bg-primary text-white">
                            <div class="card-body text-center">
                                <h6>Total Courses</h6>
                                <h4>{{ overall_performance.total_courses }}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-info text-white">
                            <div class="card-body text-center">
                                <h6>Total Assessments</h6>
                                <h4>{{ overall_performance.total_assessments }}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-success text-white">
                            <div class="card-body text-center">
                                <h6>Overall Average</h6>
                                <h4>{{ overall_performance.average_marks }}%</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-{{ 'success' if overall_performance.status == 'Pass' else 'danger' }} text-white">
                            <div class="card-body text-center">
                                <h6>Final Result</h6>
                                <h4>{{ overall_performance.status }}</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Print Button -->
                <div class="text-center mt-4">
                    <button onclick="window.print()" class="btn btn-primary">
                        <i class="fas fa-print me-1"></i>Print Result Card
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
